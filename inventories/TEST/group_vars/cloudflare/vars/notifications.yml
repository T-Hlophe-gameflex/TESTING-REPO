---
cloudflare_notification_email_destinations:
  - name: "{{ datacenter_code }}-devops-team"
    email: "{{ cloudflare_notification_email | default('thami.hlophe@gamesglobal.com') }}"
  
  - name: "{{ datacenter_code }}-qa-team"
    email: "{{ cloudflare_notification_email | default('thami.hlophe@gamesglobal.com') }}"

cloudflare_notification_webhook_destinations:
  - name: "{{ datacenter_code }}-teams-alerts"
    url: "{{ cloudflare_webhook_url | default('https://hooks.teams.com/services/YOUR/' ~ datacenter_name ~ '/WEBHOOK') }}"
    secret: "{{ cloudflare_webhook_secret | default('') }}"

cloudflare_notification_policies: 
  - name: "{{ datacenter_code }}-ssl-expiry"
    description: "Notify when SSL certificates are expiring in {{ datacenter_name }}"
    enabled: true
    alert_type: "universal_ssl_event_type"
    mechanisms:
      email:
        - "{{ datacenter_code }}-devops-team"

  - name: "{{ datacenter_code }}-health-check-failures"
    description: "Notify when health checks fail in {{ datacenter_name }}"
    enabled: true
    alert_type: "health_check_status_notification"
    filters:
      health_check_id:
        - "{{ platform_id | lower }}-api-health"
        - "{{ platform_id | lower }}-admin-health"
    mechanisms:
      email:
        - "{{ datacenter_code }}-qa-team"
      webhooks:
        - "{{ datacenter_code }}-slack-alerts"
