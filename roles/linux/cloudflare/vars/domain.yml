---
cloudflare_domain_ssl:
  universal_ssl_enabled: true
  custom_certificates: []
  ssl_mode: "{{ ssl_mode | default('full_strict') }}"
  min_tls_version: "1.2"
  tls_1_3: "on"
  always_use_https: "{{ always_use_https | default(true) }}"

cloudflare_domain_argo:
  enabled: true  
  tiered_caching: true
  smart_routing: true

cloudflare_domain_cache:
  cache_rules:
    - description: "Bypass cache for test pages"
      expression: '(http.request.uri.path contains "TestPage.html")'
      action: "set_cache_settings"
      action_parameters:
        cache: false
        browser_ttl:
          mode: "override_origin"
          default: 30
    
    - description: "Bypass cache for gamelaunch test pages"
      expression: '(http.request.uri.path eq "/gamelaunch/v1/testPage.html")'
      action: "set_cache_settings"
      action_parameters:
        cache: false
        browser_ttl:
          mode: "override_origin"
          default: 30
    
    - description: "Cache gamelaunch express JS files"
      expression: '(http.request.uri.path contains "/gamelaunch/express/" and http.request.uri.path.extension eq "js")'
      action: "set_cache_settings"
      action_parameters:
        cache: true
        edge_ttl:
          mode: "override_origin"
          default: 300
        browser_ttl:
          mode: "override_origin"
          default: 300
    
    - description: "Cache all HTML files"
      expression: '(http.request.uri.path.extension eq "html")'
      action: "set_cache_settings"
      action_parameters:
        cache: true
        edge_ttl:
          mode: "override_origin"
          default: 300
        browser_ttl:
          mode: "override_origin"
          default: 300

cloudflare_domain_security:
  waf:
    enabled: true
    mode: "default"
  
  firewall_rules:
    - description: "Block suspicious user agents"
      expression: '(http.user_agent contains "suspicious")'
      action: "block"
    
    - description: "Challenge non-browser requests"
      expression: '(not http.user_agent contains "Mozilla")'
      action: "managed_challenge"
  
  rate_limiting:
    - description: "Rate limit API endpoints"
      expression: '(http.request.uri.path contains "/api/")'
      action: "block"
      characteristics:
        - "ip.src"
      period: 60
      requests_per_period: 100
  
  ddos_protection:
    enabled: true

cloudflare_domain_performance:
  minify:
    html: true
    css: true
    js: true
  
  compression:
    brotli: true
    gzip: true
  early_hints: true
  http2: true
  http3: true
  zero_rtt: true


