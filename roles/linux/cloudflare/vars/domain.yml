---
cloudflare_domain_ssl:
  universal_ssl_enabled: true
  custom_certificates: []
  ssl_mode: "{{ ssl_mode | default('full_strict') }}"
  min_tls_version: "1.2"
  tls_1_3: "on"
  always_use_https: "{{ always_use_https | default(true) }}"

cloudflare_domain_argo:
  enabled: true  
  tiered_caching: true
  smart_routing: true

cloudflare_domain_cache:
  page_rules:
    - priority: 1
      status: "active"
      targets:
        - target: "url"
          constraint:
            operator: "matches"
            value: "*.{{ platform_domain }}/*/*TestPage.html*"
      actions:
        - id: "browser_cache_ttl"
          value: 30
        - id: "cache_level"
          value: "bypass"
    
    - priority: 2
      status: "active"
      targets:
        - target: "url"
          constraint:
            operator: "matches"
            value: "https://*.{{ platform_domain }}/gamelaunch/v1/testPage.html*"
      actions:
        - id: "browser_cache_ttl"
          value: 30
        - id: "cache_level"
          value: "bypass"
    
    - priority: 3
      status: "active"
      targets:
        - target: "url"
          constraint:
            operator: "matches"
            value: "*.{{ platform_domain }}/gamelaunch/express/*.js*"
      actions:
        - id: "browser_cache_ttl"
          value: 300
        - id: "cache_level"
          value: "ignore_query_string"
        - id: "edge_cache_ttl"
          value: 300
    
    - priority: 4
      status: "active"
      targets:
        - target: "url"
          constraint:
            operator: "matches"
            value: "*.{{ platform_domain }}/*/*.html"
      actions:
        - id: "browser_cache_ttl"
          value: 300
        - id: "cache_level"
          value: "cache_everything"
        - id: "edge_cache_ttl"
          value: 300

cloudflare_domain_security:
  waf:
    enabled: true
    mode: "default"
  
  firewall_rules:
    - description: "Block suspicious user agents"
      expression: '(http.user_agent contains "suspicious")'
      action: "block"
    
    - description: "Challenge non-browser requests"
      expression: '(not http.user_agent contains "Mozilla")'
      action: "managed_challenge"
  
  rate_limiting:
    - description: "Rate limit API endpoints"
      expression: '(http.request.uri.path contains "/api/")'
      action: "block"
      characteristics:
        - "ip.src"
      period: 60
      requests_per_period: 100
  
  ddos_protection:
    enabled: true

cloudflare_domain_performance:
  minify:
    html: true
    css: true
    js: true
  
  compression:
    brotli: true
    gzip: true
  early_hints: true
  http2: true
  http3: true
  zero_rtt: true


